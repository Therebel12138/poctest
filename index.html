<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SogouJSInterface æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fafafa;
        }
        .section h3 {
            margin-top: 0;
            color: #666;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        button:active {
            background-color: #3d8b40;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result {
            background-color: #e8f5e8;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #4CAF50;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .error {
            background-color: #ffe8e8;
            border-left-color: #f44336;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SogouJSInterface æµ‹è¯•é¡µé¢</h1>

        <!-- åŸºç¡€ä¿¡æ¯è·å– -->
        <div class="section">
            <h3>ğŸ“± åŸºç¡€ä¿¡æ¯è·å–</h3>
            <button onclick="getBasicInfo()">è·å–åŸºç¡€ä¿¡æ¯</button>
            <button onclick="getLoginState()">è·å–ç™»å½•çŠ¶æ€</button>
            <button onclick="getUniqueId()">è·å–å”¯ä¸€ID</button>
            <button onclick="getSogouAndroidId()">è·å–æœç‹—Android ID</button>
            <button onclick="getQ36()">è·å–Q36</button>
            <div id="basicInfoResult" class="result" style="display:none;"></div>
        </div>

        <!-- ç³»ç»ŸåŠŸèƒ½ -->
        <div class="section">
            <h3>ğŸ”§ ç³»ç»ŸåŠŸèƒ½</h3>
            <div class="input-group">
                <label>å¤åˆ¶æ–‡æœ¬:</label>
                <input type="text" id="clipboardText" placeholder="è¾“å…¥è¦å¤åˆ¶çš„æ–‡æœ¬" value="Hello SogouJS!">
            </div>
            <button onclick="copyToClipboard()">å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
            <button onclick="requestClipboardText()">è·å–å‰ªè´´æ¿å†…å®¹</button>
            <button onclick="showToast()">æ˜¾ç¤ºToast</button>
            <button onclick="getWebviewContentPadding()">è·å–WebViewè¾¹è·</button>
            <div id="systemResult" class="result" style="display:none;"></div>
        </div>

        <!-- å½•éŸ³åŠŸèƒ½ -->
        <div class="section">
            <h3>ğŸ¤ å½•éŸ³åŠŸèƒ½</h3>
            <button onclick="startRecord()">å¼€å§‹å½•éŸ³</button>
            <button onclick="stopRecord()">åœæ­¢å½•éŸ³</button>
            <button onclick="cancelRecording()">å–æ¶ˆå½•éŸ³</button>
            <button onclick="getRecordFilePath()">è·å–å½•éŸ³æ–‡ä»¶è·¯å¾„</button>
            <div class="input-group">
                <label>å½•éŸ³é…ç½® (JSON):</label>
                <textarea id="recordConfig" rows="3">{"questionId": 1, "callback": "onRecordCallback"}</textarea>
            </div>
            <button onclick="startRecordingWithConfig()">å¼€å§‹å½•éŸ³(å¸¦é…ç½®)</button>
            <button onclick="stopRecordingWithConfig()">åœæ­¢å½•éŸ³(å¸¦é…ç½®)</button>
            <div id="recordResult" class="result" style="display:none;"></div>
        </div>

        <!-- åˆ†äº«åŠŸèƒ½ -->
        <div class="section">
            <h3>ğŸ“¤ åˆ†äº«åŠŸèƒ½</h3>
            <div class="input-group">
                <label>åˆ†äº«æ ‡é¢˜:</label>
                <input type="text" id="shareTitle" value="æµ‹è¯•åˆ†äº«æ ‡é¢˜">
            </div>
            <div class="input-group">
                <label>åˆ†äº«å†…å®¹:</label>
                <input type="text" id="shareContent" value="è¿™æ˜¯æµ‹è¯•åˆ†äº«çš„å†…å®¹">
            </div>
            <div class="input-group">
                <label>åˆ†äº«é“¾æ¥:</label>
                <input type="text" id="shareUrl" value="https://www.sogou.com">
            </div>
            <div class="input-group">
                <label>åˆ†äº«å›¾ç‰‡URL:</label>
                <input type="text" id="shareImgUrl" value="https://www.sogou.com/images/logo.png">
            </div>
            <button onclick="setShareInfo()">è®¾ç½®åˆ†äº«ä¿¡æ¯</button>
            <button onclick="shareToApp()">åˆ†äº«åˆ°åº”ç”¨</button>
            <button onclick="openShareWin()">æ‰“å¼€åˆ†äº«çª—å£</button>
            <div id="shareResult" class="result" style="display:none;"></div>
        </div>

        <!-- åº”ç”¨æ“ä½œ -->
        <div class="section">
            <h3>ğŸ“± åº”ç”¨æ“ä½œ</h3>
            <div class="input-group">
                <label>åº”ç”¨åŒ…å:</label>
                <input type="text" id="packageName" value="com.tencent.mm" placeholder="å¦‚: com.tencent.mm">
            </div>
            <button onclick="checkAppExist()">æ£€æŸ¥åº”ç”¨æ˜¯å¦å­˜åœ¨</button>
            <button onclick="checkAppInstalled()">æ£€æŸ¥åº”ç”¨æ˜¯å¦å®‰è£…</button>
            <button onclick="jumpToWeChat()">è·³è½¬åˆ°å¾®ä¿¡</button>
            <button onclick="openAppWithScheme()">é€šè¿‡Schemeæ‰“å¼€åº”ç”¨</button>
            <div id="appResult" class="result" style="display:none;"></div>
        </div>

        <!-- ç™»å½•åŠŸèƒ½ -->
        <div class="section">
            <h3>ğŸ‘¤ ç™»å½•åŠŸèƒ½</h3>
            <div class="input-group">
                <label>ç™»å½•åŸŸå:</label>
                <input type="text" id="loginDomain" value="sogou.com">
            </div>
            <button onclick="loginAccount()">ç™»å½•è´¦æˆ·</button>
            <button onclick="loginByPhone()">æ‰‹æœºå·ç™»å½•</button>
            <button onclick="loginWithUnionPhone()">è”åˆæ‰‹æœºç™»å½•</button>
            <button onclick="getPhoneNumber()">è·å–æ‰‹æœºå·</button>
            <button onclick="didLogout()">ç™»å‡º</button>
            <div id="loginResult" class="result" style="display:none;"></div>
        </div>

        <!-- é¡µé¢æ§åˆ¶ -->
        <div class="section">
            <h3>ğŸ® é¡µé¢æ§åˆ¶</h3>
            <div class="input-group">
                <label>æ ‡é¢˜æ–‡æœ¬:</label>
                <input type="text" id="titleText" value="æ–°çš„é¡µé¢æ ‡é¢˜">
            </div>
            <button onclick="setTitleText()">è®¾ç½®æ ‡é¢˜</button>
            <button onclick="goBack()">è¿”å›</button>
            <button onclick="closePage()">å…³é—­é¡µé¢</button>
            <button onclick="setEnableShare()">å¯ç”¨åˆ†äº«</button>
            <button onclick="showHongrenTitlebar()">æ˜¾ç¤ºæ ‡é¢˜æ </button>
            <div id="pageResult" class="result" style="display:none;"></div>
        </div>

        <!-- ç½‘ç»œè¯·æ±‚ -->
        <div class="section">
            <h3>ğŸŒ ç½‘ç»œè¯·æ±‚</h3>
            <div class="input-group">
                <label>è¯·æ±‚URL:</label>
                <input type="text" id="requestUrl" value="https://www.sogou.com/api/test">
            </div>
            <div class="input-group">
                <label>è¯·æ±‚æ–¹æ³•:</label>
                <select id="requestMethod">
                    <option value="GET">GET</option>
                    <option value="POST">POST</option>
                </select>
            </div>
            <div class="input-group">
                <label>è¯·æ±‚å‚æ•° (JSON):</label>
                <textarea id="requestParams" rows="3">{"key": "value"}</textarea>
            </div>
            <button onclick="clientRequest()">å‘é€è¯·æ±‚</button>
            <div id="requestResult" class="result" style="display:none;"></div>
        </div>

        <!-- å…¶ä»–åŠŸèƒ½ -->
        <div class="section">
            <h3>ğŸ” å…¶ä»–åŠŸèƒ½</h3>
            <button onclick="isGyroscopeEnable()">æ£€æŸ¥é™€èºä»ª</button>
            <button onclick="openSearchActivity()">æ‰“å¼€æœç´¢</button>
            <button onclick="openMySuit()">æ‰“å¼€æˆ‘çš„å¥—è£…</button>
            <button onclick="openMyWallpaper()">æ‰“å¼€æˆ‘çš„å£çº¸</button>
            <button onclick="searchSuit()">æœç´¢å¥—è£…</button>
            <div id="otherResult" class="result" style="display:none;"></div>
        </div>
    </div>

    <script>
        // å…¨å±€å›è°ƒå‡½æ•°
        window.onRecordCallback = function(result) {
            showResult('recordResult', 'å½•éŸ³å›è°ƒ: ' + JSON.stringify(result));
        };

        window.onRequestCallback = function(result) {
            showResult('requestResult', 'è¯·æ±‚å›è°ƒ: ' + JSON.stringify(result));
        };

        window.onShareCallback = function(result) {
            showResult('shareResult', 'åˆ†äº«å›è°ƒ: ' + JSON.stringify(result));
        };

        window.onClipboardCallback = function(result) {
            showResult('systemResult', 'å‰ªè´´æ¿å›è°ƒ: ' + JSON.stringify(result));
        };

        window.onPaddingCallback = function(result) {
            showResult('systemResult', 'WebViewè¾¹è·: ' + JSON.stringify(result));
        };

        function showResult(elementId, text, isError = false) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.textContent = text;
            element.className = isError ? 'result error' : 'result';
        }

        function callJSBridge(method, ...args) {
            try {
                if (window.SogouHotwordsUtils && typeof window.SogouHotwordsUtils[method] === 'function') {
                    return window.SogouHotwordsUtils[method](...args);
                } else {
                    throw new Error(`æ–¹æ³• ${method} ä¸å­˜åœ¨æˆ–ä¸å¯ç”¨`);
                }
            } catch (error) {
                console.error('è°ƒç”¨JSBridgeå¤±è´¥:', error);
                return null;
            }
        }

        // åŸºç¡€ä¿¡æ¯è·å–
        function getBasicInfo() {
            const version = callJSBridge('getHotwordsSDKVersion');
            const ua = callJSBridge('getHotwordsSDKUA');
            showResult('basicInfoResult', `SDKç‰ˆæœ¬: ${version}\nUA: ${ua}`);
        }

        function getLoginState() {
            const state = callJSBridge('getLoginState', '');
            showResult('basicInfoResult', `ç™»å½•çŠ¶æ€: ${state}`);
        }

        function getUniqueId() {
            const id = callJSBridge('getUniqueId');
            showResult('basicInfoResult', `å”¯ä¸€ID: ${id}`);
        }

        function getSogouAndroidId() {
            const id = callJSBridge('getSogouAndroidId');
            showResult('basicInfoResult', `æœç‹—Android ID: ${id}`);
        }

        function getQ36() {
            const q36 = callJSBridge('getQ36');
            showResult('basicInfoResult', `Q36: ${q36}`);
        }

        // ç³»ç»ŸåŠŸèƒ½
        function copyToClipboard() {
            const text = document.getElementById('clipboardText').value;
            callJSBridge('copyToClipboard', text);
            showResult('systemResult', `å·²å¤åˆ¶: ${text}`);
        }

        function requestClipboardText() {
            callJSBridge('requestClipBoardText', 'onClipboardCallback');
        }

        function showToast() {
            callJSBridge('showToast', 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•Toast', true);
            showResult('systemResult', 'å·²æ˜¾ç¤ºToast');
        }

        function getWebviewContentPadding() {
            callJSBridge('getWebviewContentPadding', 'onPaddingCallback');
        }

        // å½•éŸ³åŠŸèƒ½
        function startRecord() {
            callJSBridge('startRecord');
            showResult('recordResult', 'å¼€å§‹å½•éŸ³');
        }

        function stopRecord() {
            callJSBridge('stopRecord');
            showResult('recordResult', 'åœæ­¢å½•éŸ³');
        }

        function cancelRecording() {
            callJSBridge('cancelRecording');
            showResult('recordResult', 'å–æ¶ˆå½•éŸ³');
        }

        function getRecordFilePath() {
            callJSBridge('getRecordFilePath', 'onRecordCallback');
        }

        function startRecordingWithConfig() {
            const config = document.getElementById('recordConfig').value;
            callJSBridge('startRecording', config);
            showResult('recordResult', 'å¼€å§‹å½•éŸ³(é…ç½®): ' + config);
        }

        function stopRecordingWithConfig() {
            const config = document.getElementById('recordConfig').value;
            callJSBridge('stopRecording', config);
            showResult('recordResult', 'åœæ­¢å½•éŸ³(é…ç½®): ' + config);
        }

        // åˆ†äº«åŠŸèƒ½
        function setShareInfo() {
            const title = document.getElementById('shareTitle').value;
            const content = document.getElementById('shareContent').value;
            const url = document.getElementById('shareUrl').value;
            const imgUrl = document.getElementById('shareImgUrl').value;

            callJSBridge('setShareTitle', title);
            callJSBridge('setShareContent', content);
            callJSBridge('setShareContentUrl', url);
            callJSBridge('setShareImgUrl', imgUrl);
            
            showResult('shareResult', 'å·²è®¾ç½®åˆ†äº«ä¿¡æ¯');
        }

        function shareToApp() {
            const title = document.getElementById('shareTitle').value;
            const content = document.getElementById('shareContent').value;
            const url = document.getElementById('shareUrl').value;
            const imgUrl = document.getElementById('shareImgUrl').value;
            
            callJSBridge('shareToApp', title, content, url, imgUrl);
            showResult('shareResult', 'åˆ†äº«åˆ°åº”ç”¨');
        }

        function openShareWin() {
            const shareInfo = {
                info: JSON.stringify({
                    title: document.getElementById('shareTitle').value,
                    content: document.getElementById('shareContent').value,
                    url: document.getElementById('shareUrl').value,
                    imgUrl: document.getElementById('shareImgUrl').value
                }),
                callback: 'onShareCallback'
            };
            callJSBridge('openShareWin', JSON.stringify(shareInfo));
        }

        // åº”ç”¨æ“ä½œ
        function checkAppExist() {
            const packageName = document.getElementById('packageName').value;
            const exists = callJSBridge('checkAppExist', packageName);
            showResult('appResult', `åº”ç”¨ ${packageName} ${exists ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`);
        }

        function checkAppInstalled() {
            const packageName = document.getElementById('packageName').value;
            callJSBridge('checkAppInstalled', packageName, 'onAppCheckCallback');
        }

        function jumpToWeChat() {
            callJSBridge('jumpToWeChat');
            showResult('appResult', 'å°è¯•è·³è½¬åˆ°å¾®ä¿¡');
        }

        function openAppWithScheme() {
            const config = {
                packageName: document.getElementById('packageName').value,
                callback: 'onAppOpenCallback'
            };
            callJSBridge('openAppWithScheme', JSON.stringify(config));
        }

        // ç™»å½•åŠŸèƒ½
        function loginAccount() {
            const domain = document.getElementById('loginDomain').value;
            callJSBridge('loginAccount', domain);
            showResult('loginResult', `å°è¯•ç™»å½•åŸŸå: ${domain}`);
        }

        function loginByPhone() {
            callJSBridge('loginByPhone');
            showResult('loginResult', 'å°è¯•æ‰‹æœºå·ç™»å½•');
        }

        function loginWithUnionPhone() {
            const config = JSON.stringify({callback: 'onLoginCallback'});
            callJSBridge('loginWithUnionPhone', config);
        }

        function getPhoneNumber() {
            callJSBridge('getPhoneNumber', 'onPhoneNumberCallback');
        }

        function didLogout() {
            callJSBridge('didLogout', 1);
            showResult('loginResult', 'å·²ç™»å‡º');
        }

        // é¡µé¢æ§åˆ¶
        function setTitleText() {
            const title = document.getElementById('titleText').value;
            callJSBridge('setTitleText', title);
            showResult('pageResult', `è®¾ç½®æ ‡é¢˜: ${title}`);
        }

        function goBack() {
            callJSBridge('goBack');
            showResult('pageResult', 'è¿”å›');
        }

        function closePage() {
            callJSBridge('closePage');
            showResult('pageResult', 'å…³é—­é¡µé¢');
        }

        function setEnableShare() {
            callJSBridge('setEnableShare', 1);
            showResult('pageResult', 'å¯ç”¨åˆ†äº«');
        }

        function showHongrenTitlebar() {
            callJSBridge('showHongrenTitlebar', true);
            showResult('pageResult', 'æ˜¾ç¤ºæ ‡é¢˜æ ');
        }

        // ç½‘ç»œè¯·æ±‚
        function clientRequest() {
            const url = document.getElementById('requestUrl').value;
            const method = document.getElementById('requestMethod').value;
            const params = document.getElementById('requestParams').value;
            
            const requestConfig = {
                url: url,
                method: method,
                postParams: params,
                callback: 'onRequestCallback',
                urlIgnoreSogouQq: false
            };
            
            callJSBridge('clientRequest', JSON.stringify(requestConfig));
            showResult('requestResult', 'å‘é€è¯·æ±‚ä¸­...');
        }

        // å…¶ä»–åŠŸèƒ½
        function isGyroscopeEnable() {
            const enabled = callJSBridge('isGyroscopeEnable');
            showResult('otherResult', `é™€èºä»ª${enabled ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨'}`);
        }

        function openSearchActivity() {
            callJSBridge('openSearchActivity', 0);
            showResult('otherResult', 'æ‰“å¼€æœç´¢ç•Œé¢');
        }

        function openMySuit() {
            callJSBridge('openMySuit');
            showResult('otherResult', 'æ‰“å¼€æˆ‘çš„å¥—è£…');
        }

        function openMyWallpaper() {
            callJSBridge('openMyWallpaper');
            showResult('otherResult', 'æ‰“å¼€æˆ‘çš„å£çº¸');
        }

        function searchSuit() {
            callJSBridge('searchSuit');
            showResult('otherResult', 'æœç´¢å¥—è£…');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('SogouJSInterface æµ‹è¯•é¡µé¢å·²åŠ è½½');
            if (window.SogouHotwordsUtils) {
                console.log('JSBridge å¯ç”¨');
            } else {
                console.log('JSBridge ä¸å¯ç”¨ï¼Œè¯·åœ¨æœç‹—è¾“å…¥æ³•ç¯å¢ƒä¸­æµ‹è¯•');
            }
        });
    </script>
</body>
</html>
